# 极端价格场景测试

目标：验证价格靠近 0/1 时，系统不会产生非法报价或异常下单。

## 1. 代码侧保护

- 报价钳制：`clamp(0.001, 0.999)`
- 发单前舍入：价格 3 位小数，数量 6 位小数
- 支持 WS `tick_size_change` 事件（可扩展为动态参数）

## 2. 建议测试场景

1. YES 接近 0.99 / NO 接近 0.01
2. YES 接近 0.01 / NO 接近 0.99
3. 快速单边波动 + 高频重报价

## 3. 观察点

- 无负数价格
- 无 `> 1` 价格
- 无精度拒单（tick/size）
- OFI 毒性触发后能及时撤单

## 4. 运行方式

```bash
PM_DRY_RUN=true cargo run --bin polymarket_v2
```

有条件时再小仓 live 复验。
